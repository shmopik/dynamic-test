<html>
  <head>
    <script lang="javascript">
      parseSectionCsv = function(content){
        const headers = str.slice(0, str.indexOf("\n")).split(delimiter);
        const rows = str.slice(str.indexOf("\n") + 1).split("\n");

        const arr = rows.map(function (row) {
          const values = row.split(delimiter);
          const el = headers.reduce(function (object, header, index) {
            object[header] = values[index];
            return object;
          }, {});
          return el;
        });

        return arr;
      }
      
      window.onload = function(){
        fetch('test.csv')
          .then(response => response.text())
          .then(text => {
             const json = parseSectionCsv(text);
             document.getElementById('text').innerHTML = JSON.stringify(json);
          })
      }
    </script>
  </head>
  <body>
    <div id="text"></div>
  </body>
</html>
